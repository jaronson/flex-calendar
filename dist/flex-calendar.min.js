!function(){function e(){var e='<div class="flex-calendar"><div class="month"><div class="arrow" ng-click="prevMonth()"></div><div class="label">{{selectedMonth}} {{selectedYear}}</div><div class="arrow" ng-click="nextMonth()"></div></div><div class="week"><div class="day" ng-repeat="day in weekDays(options.dayNamesLength) track by $index">{{day}}</div></div><div class="days"><div class="day"ng-repeat="day in days  track by $index"ng-class="{selected: isDefaultDate(day), event: day.event, disabled: day.disabled, out: !day}"ng-click="onClick(day, $index)"><div class="number">{{day.day}}</div></div></div></div>',n={restrict:"E",scope:{options:"=?",events:"=?"},template:e,controller:t};return n}function t(e){function t(t,n){t&&!t.disabled&&(e.options.defaultDate=t.date,t.event?e.options.eventClick(t):e.options.dateClick(t))}function n(t){t&&e.events&&e.events.forEach(function(e){e.date=new Date(e.date),t.year===e.date.getFullYear()&&t.month===e.date.getMonth()&&t.day===e.date.getDate()&&(t.event=e)})}function a(t){if(!e.options.minDate&&!e.options.maxDate)return!0;var n=new Date([t.year,t.month+1,t.day]);return e.options.minDate&&n<e.options.minDate?!1:e.options.maxDate&&n>e.options.maxDate?!1:!0}function o(t){if(!e.options.disabledDates)return!1;for(var n=0;n<e.options.disabledDates.length;n++)if(t.year===e.options.disabledDates[n].getFullYear()&&t.month===e.options.disabledDates[n].getMonth()&&t.day===e.options.disabledDates[n].getDate())return!0}function i(){var t=null,n=null;if(!e.options.minDate)return!0;var a=h.indexOf(e.selectedMonth);return t=0===a?e.selectedYear-1:e.selectedYear,n=0===a?11:a-1,t<e.options.minDate.getFullYear()?!1:t===e.options.minDate.getFullYear()&&n<e.options.minDate.getMonth()?!1:!0}function d(){var t=null,n=null;if(!e.options.maxDate)return!0;var a=h.indexOf(e.selectedMonth);return t=11===a?e.selectedYear+1:e.selectedYear,n=11===a?0:a+1,t>e.options.maxDate.getFullYear()?!1:t===e.options.maxDate.getFullYear()&&n>e.options.maxDate.getMonth()?!1:!0}function s(){e.days=e.weeks.reduce(function(e,t){return e.concat(t)})}function l(){e.weeks=[];for(var t=null,i=new Date(e.selectedYear,h.indexOf(e.selectedMonth)+1,0).getDate(),d=1;i+1>d;d+=1){var l=new Date(e.selectedYear,h.indexOf(e.selectedMonth),d),r=new Date(e.selectedYear,h.indexOf(e.selectedMonth),d).getDay();t=t||[null,null,null,null,null,null,null],t[r]={year:e.selectedYear,month:h.indexOf(e.selectedMonth),day:d,date:l,_month:l.getMonth()+1},a(t[r])?e.events&&n(t[r]):t[r].disabled=!0,t[r]&&o(t[r])&&(t[r].disabled=!0),(6===r||d===i)&&(e.weeks.push(t),t=void 0)}s()}function r(){e.options._defaultDate=e.options.defaultDate?new Date(e.options.defaultDate):new Date,e.selectedYear=e.options._defaultDate.getFullYear(),e.selectedMonth=h[e.options._defaultDate.getMonth()],e.selectedDay=e.options._defaultDate.getDate(),l()}function c(){if(e.options.disabledDates&&0!==e.options.disabledDates.length){for(var t=0;t<e.options.disabledDates.length;t++)e.options.disabledDates[t]=new Date(e.options.disabledDates[t]);l()}}function u(e){return v.map(function(t){return t.slice(0,e)})}function D(t){if(t){var n=t.year===e.options._defaultDate.getFullYear()&&t.month===e.options._defaultDate.getMonth()&&t.day===e.options._defaultDate.getDate();return n}}function p(){if(e.allowedPrevMonth()){var t=h.indexOf(e.selectedMonth);0===t?(e.selectedYear-=1,e.selectedMonth=h[11]):e.selectedMonth=h[t-1];var n={name:e.selectedMonth,index:t-1,_index:t+2};e.options.changeMonth(n),l()}}function f(){if(e.allowedNextMonth()){var t=h.indexOf(e.selectedMonth);11===t?(e.selectedYear+=1,e.selectedMonth=h[0]):e.selectedMonth=h[t+1];var n={name:e.selectedMonth,index:t+1,_index:t+2};e.options.changeMonth(n),l()}}var h=["January","February","March","April","May","June","July","August","September","October","November","December"],v=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];e.days=[],e.options=e.options||{},e.options.dayNamesLength=e.options.dayNamesLength||1,e.onClick=t,e.allowedPrevMonth=i,e.allowedNextMonth=d,e.weekDays=u,e.isDefaultDate=D,e.prevMonth=p,e.nextMonth=f,e.options.minDate&&(e.options.minDate=new Date(e.options.minDate)),e.options.maxDate&&(e.options.maxDate=new Date(e.options.maxDate)),e.$watch("options.defaultDate",function(){r()}),e.$watch("options.disabledDates",function(){c()}),e.$watch("events",function(){l()})}angular.module("flexcalendar",[]).directive("flexCalendar",e),t.$inject=["$scope"]}();